var PageJs=new Class.create
PageJs.prototype=Object.extend(new FrontPageJs,{_ressultPanelId:"",_getLoadingPanel:function(){var e={}
return e.me=this,new Element("div",{"class":"row"}).update(e.me._getLoadingDiv())},_submitResetPass:function(){var e={}
return e.me=this,e.data={skey:e.me._skey},$(e.me._ressultPanelId).getElementsBySelector("[reset-panel]").each(function(t){e.data[t.readAttribute("reset-panel")]=$F(t).strip()}),$(e.me._ressultPanelId).down(".msg-div").update(""),e.loadingDiv=e.me._getLoadingPanel(),e.me.postAjax(e.me.getCallbackId("reset-pass"),e.data,{onLoading:function(){$(e.me._ressultPanelId).insert({after:e.loadingDiv}).hide()},onSuccess:function(t,s){try{if(e.result=e.me.getResp(s,!1,!0),!e.result||!e.result.url)return
jQuery(e.me.jQueryFormSelector).bootstrapValidator("resetForm",!0),$(e.me._ressultPanelId).update(new Element("div",{"class":"well"}).insert({bottom:new Element("h4").update("Password saved")}).insert({bottom:new Element("strong").insert({bottom:new Element("a",{href:e.result.url}).update("You can click here to login, if you browser did not automactially refersh.")})}))}catch(n){$(e.me._ressultPanelId).down(".msg-div").update(e.me.getAlertBox("Error:",n).addClassName("alert-danger"))}},onComplete:function(){e.loadingDiv.remove(),$(e.me._ressultPanelId).show()}}),e.me},_loadValidator:function(){var e={}
return e.me=this,jQuery(e.me.jQueryFormSelector).bootstrapValidator({feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{new_pass:{validators:{notEmpty:{message:"Your email is needed here"},stringLength:{min:6,max:30,message:"The password must be more than 6 and less than 30 characters long"}}},confirm_pass:{enabled:!1,validators:{notEmpty:{message:"You password please."},identical:{field:"new_pass",message:"The password and its confirm must be the same"}}}}}).on("success.form.bv",function(t){t.preventDefault(),e.me._submitResetPass()}).on("error.field.bv",function(e,t){t.bv.disableSubmitButtons(!1)}).on("success.field.bv",function(e,t){t.bv.disableSubmitButtons(!1)}).on("keyup",'[name="new_pass"]',function(){e.thisVal=jQuery(this).val(),e.isEmpty=""==e.thisVal,jQuery(e.me.jQueryFormSelector).bootstrapValidator("enableFieldValidators","confirm_pass",!e.isEmpty),e.thisVal.length>1&&jQuery(e.me.jQueryFormSelector).bootstrapValidator("validateField","confirm_pass")}),e.me},_getFormGroup:function(e,t){return new Element("div",{"class":"form-group"}).insert({bottom:new Element("label",{"class":"col-sm-4 control-label"}).update(e)}).insert({bottom:new Element("div",{"class":"col-sm-8"}).update(t)})},_showForm:function(){var e={}
return e.me=this,e.newDiv=new Element("div",{"class":"row pass-reset-panel"}).insert({bottom:new Element("div",{"class":"col-sm-6 col-sm-push-3"}).insert({bottom:new Element("div",{"class":"form-horizontal"}).insert({bottom:new Element("div",{"class":"form-group"}).insert({bottom:new Element("h3").update("Please provide your new password:")})}).insert({bottom:e.me._getFormGroup("Password:",new Element("input",{"class":"form-control pass-field",name:"new_pass","reset-panel":"new_pass",placeholder:"Your new password",type:"password"}))}).insert({bottom:e.me._getFormGroup("Confirm password:",new Element("input",{"class":"form-control pass-field",name:"confirm_pass","reset-panel":"confirm_pass",placeholder:"Confirm your new password",type:"password"}))}).insert({bottom:new Element("div",{"class":"form-group"}).insert({bottom:new Element("div",{"class":"col-sm-offset-4 col-sm-8"}).insert({bottom:new Element("div",{"class":"checkbox"}).insert({bottom:new Element("label").insert({bottom:new Element("input",{type:"checkbox"}).observe("click",function(){e.checked=$(this).checked,$(this).up(".pass-reset-panel").getElementsBySelector("input.pass-field").each(function(t){t.writeAttribute("type",e.checked===!0?"text":"password")})})}).insert({bottom:new Element("span").update(" Show Password")})})})})}).insert({bottom:e.me._getFormGroup("",new Element("div").insert({bottom:new Element("div",{"class":"msg-div"}).update("")}).insert({bottom:new Element("button",{type:"submit","class":"btn btn-primary btn-lg"}).update("Confirm")}))})})}),$(e.me._ressultPanelId).update(e.newDiv),e.me},init:function(e,t,s,n){var o={}
return o.me=this,o.me._ressultPanelId=e,o.me._skey=s,o.me._username=n,o.me.jQueryFormSelector=t,o.me._showForm(),o.me._loadValidator(),o.me}})
