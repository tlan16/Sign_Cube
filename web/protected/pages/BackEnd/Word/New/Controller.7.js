var PageJs=new Class.create
PageJs.prototype=Object.extend(new BackEndPageJs,{_getTitleRowData:function(){return{name:"Name",code:"Code",active:"Active?"}},_htmlIds:{},_language:null,_category:{},_word:{},_items:{},_videos:[],_definitionTypes:{},setHTMLIds:function(e,t,n){var i={}
return i.me=this,i.me._htmlIds.itemDiv=e,i.me._htmlIds.searchPanel=t,i.me._htmlIds.newWordBtn="new_word_btn",i.me._htmlIds.uploaderDivId=n,i.me._htmlIds.definitionsContainer="definitions_container",i.me._htmlIds.definitionsContainerInner="definitions_container_inner",i.me._htmlIds.breadcrumb="breadcrumb",this},_saveWord:function(){var e={}
return e.me=this,e.data=[],$(e.me._htmlIds.definitionsContainerInner).getElementsBySelector(".definitionGroup").each(function(t){e.type=$F($(t).down('.panel-heading [save-def-item="type"]')),e.videoId=$(t).up(".video-container").readAttribute("videoid"),e.typeId=$F($(t).down('.panel-heading [save-def-item="typeId"]')),e.typeValid=$(t).visible(),e.type.empty()||(e.formType=e.type,e.formRows=[],$(t).getElementsBySelector(".panel-body .row.definitionRow").each(function(t){e.row=$F($(t).down('[save-def-item="definitionRow"]')),e.rowId=$F($(t).down('[save-def-item="definitionId"]')),e.order=$F($(t).down('[save-def-item="definitionOrder"]')),e.rowValid=$(t).visible(),e.row.empty()||e.formRows.push({def:e.row,id:e.rowId,order:e.order,valid:e.rowValid})}),e.data.push({type:e.formType,id:e.typeId,videoId:e.videoId,rows:e.formRows,valid:e.typeValid}))}),e.nothing=!0,e.data.each(function(t){t.valid===!0&&t.rows.length>0&&(e.nothing=!1)}),e.nothing===!0?(e.me.showModalBox("Notice",'<h4>There has to be <b>at least</b> one definition for word "'+e.me._word.name+'"</h4>'),e.me):(e.me.postAjax(e.me.getCallbackId("saveWord"),{definitions:e.data,videos:e.me._videos,word:e.me._word},{onLoading:function(){$(e.me._htmlIds.itemDiv).insert({top:e.loadingImg=e.me.getLoadingImg()}),$(e.me._htmlIds.definitionsContainer).hide()},onSuccess:function(t,n){try{if(e.result=e.me.getResp(n,!1,!0),!e.result.item||e.result.item.id.empty())throw"errror: php passback Error"
e.me.showModalBox("Success","<h4>Word Saved Successfully</h4>"),window.location.reload()}catch(i){e.me.showModalBox('<span class="text-danger">ERROR</span>',i,!0)}},onComplete:function(){e.loadingImg.remove()}}),e.me)},_getNewDefinitionBodyRow:function(e){var t={}
return t.me=this,t.definition=e||!1,t.newDiv=new Element("div",{"class":"row definitionRow"}).setStyle("padding-bottom: 10px;").insert({bottom:new Element("span",{"class":"col-md-8"}).insert({bottom:new Element("input",{"save-def-item":"definitionId",type:"text",value:t.definition===!1?"":t.definition.id}).setStyle("display: none;")}).insert({bottom:new Element("input",{"save-def-item":"definitionRow",type:"text",placeholder:"Definition",title:"Definition",value:t.definition===!1?"":t.definition.content}).setStyle("width: 60%;").observe("keydown",function(e){return t.btn=$(this),t.me.keydown(e,function(){t.btn.up(".row.definitionRow").down('[save-def-item="definitionOrder"]').focus(),t.btn.up(".row.definitionRow").down('[save-def-item="definitionOrder"]').select()}),!1})})}).insert({bottom:new Element("span",{"class":"col-md-2"}).insert({bottom:new Element("input",{"save-def-item":"definitionOrder",type:"value",placeholder:"Order (optional)",title:"Order (optional)",value:t.definition===!1?"":t.definition.sequence}).setStyle("width: 60%;").observe("keydown",function(e){return t.btn=$(this),t.me.keydown(e,function(){t.btn.up(".row.definitionRow").down(".btn.btn-new-defRow").click()}),!1})})}).insert({bottom:new Element("span",{"class":"col-md-2 text-right"}).insert({bottom:new Element("span",{"class":"btn-group"}).insert({bottom:new Element("span",{"class":"btn btn-success btn-xs btn-new-defRow"}).insert({bottom:new Element("i",{"class":"fa fa-plus"})}).observe("click",function(){$F($(this).up(".row.definitionRow").down('[save-def-item="definitionRow"]')).empty()?$(this).up(".row.definitionRow").down('[save-def-item="definitionRow"]').focus():($(this).up(".panel.definitionGroup").getElementsBySelector(".row.definitionRow").each(function(e){e.addClassName("btn-hide-row")}),$(this).up(".panel.definitionGroup").down(".panel-body").insert({bottom:t.newDefRow=t.me._getNewDefinitionBodyRow()}),t.newDefRow.down('[save-def-item="definitionRow"]').focus(),t.newDefRow.down('[save-def-item="definitionRow"]').select())})}).insert({bottom:new Element("span",{"class":"btn btn-danger btn-xs"}).insert({bottom:new Element("i",{"class":"fa fa-times"})}).observe("click",function(){$(this).up(".row.definitionRow").hide()})})})}),t.newDiv},_getNewDefinitionGroup:function(e){var t={}
return t.me=this,t.definition=e||!1,t.newDiv=new Element("div",{"class":"panel panel-default definitionGroup"}).insert({bottom:new Element("div",{"class":"panel-heading"}).insert({bottom:new Element("div",{"class":"row"}).insert({bottom:new Element("input",{"save-def-item":"typeId",type:"text",value:t.definition===!1?"":t.definition.definitionType.id}).setStyle("display: none;")}).insert({bottom:new Element("input",{"save-def-item":"type",type:"text",placeholder:"the Type of Definition",value:t.definition===!1?"":t.definition.definitionType.name}).setStyle("width: 60%;").observe("keydown",function(e){return t.btn=$(this),t.me.keydown(e,function(){t.btn.up(".panel-heading").down(".btn-save-def-type").click()}),!1}).wrap(new Element("span",{"class":"col-md-8"}))}).insert({bottom:new Element("span",{"class":"col-md-4 btn-group pull-right"}).insert({bottom:new Element("span",{"class":"btn btn-success btn-xs btn-save-def-type pull-right"}).insert({bottom:new Element("i",{"class":"glyphicon glyphicon-floppy-saved"})}).observe("click",function(){$F($(this).up(".panel-heading").down('[save-def-item="type"]')).empty()?$(this).up(".panel-heading").down('[save-def-item="type"]').focus():($(this).up(".panel.definitionGroup").down(".panel-body").insert({bottom:t.me.bodyRow=t.me._getNewDefinitionBodyRow()}),t.me.bodyRow.down('[save-def-item="definitionRow"]').focus(),t.me.bodyRow.down('[save-def-item="definitionRow"]').select())})}).insert({bottom:new Element("span",{"class":"btn btn-danger btn-xs pull-right"}).insert({bottom:new Element("i",{"class":"glyphicon glyphicon-floppy-remove"})}).observe("click",function(){$(this).up(".panel.definitionGroup").hide()})})})})}).insert({bottom:new Element("div",{"class":"panel-body"})}),t.newDiv},_getDefinitionsContainer:function(){var e={}
return e.me=this,e.newDIv=new Element("div",{id:e.me._htmlIds.definitionsContainer}).insert({bottom:new Element("div",{"class":"row"}).insert({bottom:new Element("span",{"class":"btn btn-sm btn-success pull-right"}).setStyle("margin-right: 5%;").insert({bottom:new Element("span").update("Save Word")}).observe("click",function(){e.me._saveWord()})})}).insert({bottom:new Element("div",{id:e.me._htmlIds.definitionsContainerInner}).insert({bottom:new Element("div",{"class":"row video-container panel panel-sucess",videoid:"ALL"}).setStyle(e.me._videos.length>1?"box-shadow: 0 1px 10px #70af00;":"box-shadow: unset;").insert({bottom:new Element("div",{"class":"panel-body"}).insert({bottom:new Element("span",{"class":"btn btn-xs btn-default btn-video-preview"}).setStyle(e.me._videos.length>1?"display:none;":"").insert({bottom:new Element("i",{"class":"glyphicon glyphicon-play-circle"})}).insert({bottom:new Element("span").update("Preview video")}).observe("click",function(){e.videoEl=new Element("video",{"class":"video-js vjs-default-skin vjs-big-play-centered",width:"100%",controls:!0,preload:"auto",autoplay:!0,loop:!0}).insert({bottom:new Element("source",{src:e.me._videos[0].src,type:e.me._videos[0].mimeType})}),e.me._signRandID(e.videoEl),e.me.showModalBox("Video Preview",e.videoEl),videojs($(e.videoEl.id),{},function(){})})}).insert({bottom:new Element("div",{"class":"btn btn-xs btn-primary btn-new-definitionGroup pull-right"}).setStyle("margin-top: -22px;").insert({bottom:new Element("i",{"class":"fa fa-plus"}).update("&nbsp;&nbsp;New Definition Type")}).observe("click",function(){$(this).insert({after:e.newDefinitionGroup=e.me._getNewDefinitionGroup()}),e.newDefinitionGroup.down('[save-def-item="type"]').focus()})})})})}),$(e.me._htmlIds.itemDiv).update(e.newDIv),jQuery.isNumeric(e.me._word.id)?e.me._word.definitions&&e.me._word.definitions.length>0&&(e.me._videos.each(function(t){t.valid===!0&&void 0===$(e.me._htmlIds.definitionsContainerInner).down('.row.video-container[videoid="'+t.id+'"]')&&$(e.me._htmlIds.definitionsContainerInner).insert({bottom:new Element("div",{"class":"row video-container panel panel-sucess",videoid:t.id}).setStyle("box-shadow: 0 1px 10px #70af00;").insert({bottom:new Element("span",{"class":"btn btn-xs btn-default btn-video-preview"}).insert({bottom:new Element("i",{"class":"glyphicon glyphicon-play-circle"})}).insert({bottom:new Element("span").update("Preview video")}).observe("click",function(){e.videoEl=new Element("video",{"class":"video-js vjs-default-skin vjs-big-play-centered",width:320,height:240,controls:!0,preload:"auto",autoplay:!0,loop:!0}).insert({bottom:new Element("source",{src:t.src,type:t.mimeType})}),e.me._signRandID(e.videoEl),e.me.showModalBox("Video Preview",e.videoEl),videojs($(e.videoEl.id),{},function(){})})}).insert({bottom:new Element("div",{"class":"panel-body"}).insert({bottom:new Element("div",{"class":"btn btn-xs btn-primary btn-new-definitionGroup pull-right"}).setStyle("margin-top: -2%;").insert({bottom:new Element("i",{"class":"fa fa-plus"}).update("&nbsp;&nbsp;New Definition Type")}).observe("click",function(){$(this).insert({after:e.newDefinitionGroup=e.me._getNewDefinitionGroup()}),e.newDefinitionGroup.down('[save-def-item="type"]').focus()})})})})}),e.me._word.definitions.each(function(t){e.valid=!1,e.me._videos.each(function(n){e.valid===!1&&n.id===t.video.id&&n.valid===!0&&(e.valid=!0)}),e.valid===!0&&(e.videoContainer=$(e.me._htmlIds.definitionsContainerInner).down('.row.video-container[videoid="'+t.video.id+'"]'),e.foundType=!1,e.videoContainer.getElementsBySelector('[save-def-item="type"]').each(function(n){e.foundType===!1&&$F(n)==t.definitionType.name&&(e.foundType=!0,e.order=n.up(".panel.definitionGroup").down(".panel-body").down('[save-def-item="definitionOrder"]')?$F(n.up(".panel.definitionGroup").down(".panel-body").down('[save-def-item="definitionOrder"]')):0,n.up(".panel.definitionGroup").down(".panel-body").insert(parseInt(t.sequence)>e.order?{bottom:e.me._getNewDefinitionBodyRow(t)}:{top:e.me._getNewDefinitionBodyRow(t)}))}),e.foundType===!1&&(e.videoContainer.down(".panel-body").insert({bottom:e.newDefinitionGroup=e.me._getNewDefinitionGroup(t)}),e.newDefinitionGroup.down(".panel-body").insert({bottom:e.me._getNewDefinitionBodyRow(t)})))}),$(e.me._htmlIds.definitionsContainerInner).down('.video-container[videoid="ALL"]').remove()):(e.newDIv.down(".btn.btn-new-definitionGroup").click(),$(e.me._htmlIds.definitionsContainer).insert({top:new Element("a",{"class":"pull-right"}).setStyle(e.me._videos.length>1?"":"display: none;").update("Different definition for each video ? cleck here").setStyle("cursor: pointer;").observe("click",function(){$(this).up(".diff-link-row").hide(),e.oldGroups=$(e.me._htmlIds.definitionsContainerInner).down('[videoid="ALL"]').remove(),e.me._videos.each(function(t){t.valid===!0&&$(e.me._htmlIds.definitionsContainerInner).insert({bottom:new Element("div",{"class":"row video-container panel panel-sucess",videoid:t.id}).setStyle(e.me._videos.length>1?"box-shadow: 0 1px 10px #70af00;":"box-shadow: unset;").insert({bottom:new Element("span",{"class":"btn btn-xs btn-default btn-video-preview"}).insert({bottom:new Element("i",{"class":"glyphicon glyphicon-play-circle"})}).insert({bottom:new Element("span").update("Preview video")}).observe("click",function(){e.videoEl=new Element("video",{"class":"video-js vjs-default-skin vjs-big-play-centered",width:"100%",controls:!0,preload:"auto",autoplay:!0,loop:!0}).insert({bottom:new Element("source",{src:t.src,type:t.mimeType})}),e.me._signRandID(e.videoEl),e.me.showModalBox("Video Preview",e.videoEl),videojs($(e.videoEl.id),{},function(){})})}).insert({bottom:new Element("div",{"class":"panel-body"}).insert({bottom:new Element("div",{"class":"btn btn-xs btn-primary btn-new-definitionGroup pull-right"}).setStyle("margin-top: -2%;").insert({bottom:new Element("i",{"class":"fa fa-plus"}).update("&nbsp;&nbsp;New Definition Type")}).observe("click",function(){$(this).insert({after:e.newDefinitionGroup=e.me._getNewDefinitionGroup()}),e.newDefinitionGroup.down('[save-def-item="type"]').focus()})}).insert({bottom:e.me._getNewDefinitionGroup()})})})}),e.id=$(e.me._htmlIds.definitionsContainerInner).down(".video-container").readAttribute("videoid"),$(e.me._htmlIds.definitionsContainerInner).down(".video-container").replace(e.oldGroups),e.previewEL=$(e.me._htmlIds.definitionsContainerInner).down(".video-container .btn.btn-video-preview"),e.previewEL.remove(),$(e.me._htmlIds.definitionsContainerInner).down(".video-container").insert({top:e.previewEL}),e.previewEL.show(),$(e.me._htmlIds.definitionsContainerInner).down(".video-container").writeAttribute("videoid",e.id)}).wrap(new Element("div",{"class":"row diff-link-row"}))})),e.me},_getDefinitionTypes:function(){var e={}
e.me=this,e.me.postAjax(e.me.getCallbackId("getDefTypes"),{},{onLoading:function(){$(e.me._htmlIds.itemDiv).update(e.loadingImg=e.me.getLoadingImg())},onSuccess:function(t,n){try{if(e.result=e.me.getResp(n,!1,!0),!e.result.items)throw"errror"
e.me_definitionTypes=e.result.items,e.me._getDefinitionsContainer()}catch(i){e.me.showModalBox('<span class="text-danger">ERROR</span>',i,!0)}},onComplete:function(){e.loadingImg.remove()}})},selectVideos:function(){var e={}
e.me=this,e.me._getDefinitionTypes(),e.count=0,e.me._videos.each(function(t){t.valid===!0&&(e.count+=1)}),$(e.me._htmlIds.breadcrumb).show().insert({bottom:new Element("li").update(e.count+" Video"+(1===e.count?"":"s"))})},getVideoEl:function(e,t,n,i){var o={}
return o.me=this,o.width=n||!1,o.height=i||!1,o.videoEl=new Element("video",{"class":"video-js vjs-default-skin vjs-big-play-centered",controls:jQuery(window).width()<380?!1:!0,preload:"auto",autoplay:!0,loop:!0}).insert({bottom:new Element("source",{src:e,type:t})}),jQuery(window).width()<380&&o.videoEl.writeAttribute("width","90%"),o.width!==!1&&o.videoEl.writeAttribute("width",o.width),o.height!==!1&&o.videoEl.writeAttribute("height",o.height),o.videoEl},getVideoRow:function(e,t,n){var i={}
return i.me=this,e.insert({bottom:new Element("div",{"class":"row video-row","video-id":t.id}).insert({bottom:new Element("div",{"class":"col-md-4"}).insert({bottom:i.videoEl=i.me.getVideoEl(t.asset.url,n.mimeType)})}).insert({bottom:new Element("div",{"class":"col-md-8"}).insert({bottom:new Element("div",{"class":"row hidden-xs"}).update("<b>Asset</b>")}).insert({bottom:i.assetKeyRow=new Element("div",{"class":"row asset-key-row hidden-xs"})}).insert({bottom:i.assetValueRow=new Element("div",{"class":"row asset-value-row hidden-xs"})}).insert({bottom:new Element("div",{"class":"row clearfix hidden-xs"}).setStyle("border: 1px solid brown;")}).insert({bottom:new Element("div",{"class":"row hidden-xs"}).update("<b>Video</b>")}).insert({bottom:i.videoKeyRow=new Element("div",{"class":"row video-key-row hidden-xs"})}).insert({bottom:i.videoValueRow=new Element("div",{"class":"row video-value-row hidden-xs"})}).insert({bottom:new Element("div",{"class":"row btn-row text-right"}).insert({bottom:new Element("div",{"class":"btn btn-delete-video btn-danger btn-xs"}).insert({bottom:new Element("i",{"class":"glyphicon glyphicon-trash"})}).observe("click",function(){$(this).up('[video-id="'+t.id+'"]').hide()})})})})}),i.me._signRandID(i.videoEl),videojs($(i.videoEl.id),{},function(){}),$H(t.asset).each(function(e){i.assetKeyRow.insert({bottom:new Element("span",{"class":"filename"==e.key||"assetId"==e.key?"col-md-3":"col-md-1",title:e.key}).setStyle("white-space: nowrap; overflow: hidden; text-overflow: clip;").update(e.key)}),i.assetValueRow.insert({bottom:new Element("span",{"class":"filename"==e.key||"assetId"==e.key?"col-md-3":"col-md-1",title:e.value}).setStyle("white-space: nowrap; overflow: hidden; text-overflow: ellipsis;").update(e.value).observe("dblclick",function(){i.me.showModalBox(e.key,i.txtArea=new Element("input",{value:e.value}).setStyle("width: 100%;").observe("keyup",function(){i.txtArea.value=e.value})),i.txtArea.focus(),i.txtArea.select()})})}),$H(t).each(function(e){i.videoKeyRow.insert({bottom:new Element("span",{"class":"col-md-1",title:e.key}).setStyle("white-space: nowrap; overflow: hidden; text-overflow: clip;").update(e.key)}),i.videoValueRow.insert({bottom:new Element("span",{"class":"col-md-1",title:e.value}).setStyle("white-space: nowrap; overflow: hidden; text-overflow: ellipsis;").update(e.value).observe("dblclick",function(){i.me.showModalBox(e.key,i.txtArea=new Element("input",{value:e.value}).setStyle("width: 100%;").observe("keyup",function(){i.txtArea.value=e.value})),i.txtArea.focus(),i.txtArea.select()})})}),i.videoValueRow.insert({top:new Element("input",{value:t.id,"save-item":"videoId"}).setStyle("display:none;")}),i.videoValueRow.insert({top:new Element("input",{value:t.asset.url,"save-item":"videoSrc"}).setStyle("display:none;")}),i.videoValueRow.insert({top:new Element("input",{value:t.asset.mimeType,"save-item":"mimeType"}).setStyle("display:none;")}),i.me},_loadUploader:function(){var e={}
return e.me=this,e.fileSizeLimit=5e7,e.uploader=jQuery("#fileupload").fileupload({url:"/fileUploader/",type:"POST",dataType:"JSON",formAcceptCharset:"utf-8",maxFileSize:e.fileSizeLimit,add:function(t,n){return e.uploadErrors=[],e.acceptFileTypes=/^video\/(mp4|x-ms-wmv|quicktime)$/i,n.originalFiles&&1!=n.originalFiles.length?(e.me.showModalBox("Invalid File Quantity","Only one file per upload"),e.me):n.originalFiles[0].type.length&&!e.acceptFileTypes.test(n.originalFiles[0].type)?(e.me.showModalBox("Invalid File Type","Not an accepted file type"),e.me):n.originalFiles[0].size&&n.originalFiles[0].size>e.fileSizeLimit?(e.me.showModalBox("Invalid File Size","File is too big"),e.me):void(0==e.uploadErrors.length&&n.submit())},done:function(t,n){jQuery("#progress .bar").css("width","0%"),e.me.getVideoRow($(e.me._htmlIds.uploaderDivId).down(".panel-body"),n._response.result.video,n._response.result.video.asset)},fail:function(t,n){e.message="",jQuery.each(n.messages,function(t,n){e.me.showModalBox("Error",'<p style="color: red;">Upload file error: '+n+'<i class="elusive-remove" style="padding-left:10px;"/></p>')})},progressall:function(t,n){e.progress=parseInt(n.loaded/n.total*100,10),jQuery("#progress .bar").css("width",e.progress+"%")}}),e.me},_getVideoUploadPanel:function(){var e={}
return e.me=this,$(e.me._htmlIds.itemDiv).insert({bottom:new Element("div",{"class":"panel panel-default",id:e.me._htmlIds.uploaderDivId}).insert({bottom:new Element("div",{"class":"panel-head"})}).insert({bottom:new Element("div",{"class":"panel-body"})})}),$(e.me._htmlIds.uploaderDivId).down(".panel-head").insert({bottom:new Element("div").insert({bottom:new Element("strong").update("New Video")}).insert({bottom:new Element("span",{"class":"btn btn-sm btn-success pull-right btn-save-videos"}).insert({bottom:new Element("span").update("Confirm Videos")}).observe("click",function(){$(e.me._htmlIds.uploaderDivId).getElementsBySelector(".video-row").each(function(t){e.me._videos.push({id:e.me._collectFormData(t,"save-item").videoId,src:e.me._collectFormData(t,"save-item").videoSrc,mimeType:e.me._collectFormData(t,"save-item").mimeType,valid:t.visible()})}),pageJs._videos.length?($(this).down("span").update("loading..."),$(this).writeAttribute("disabled",!0),e.me.selectVideos()):e.me.showModalBox("Notice","<h4>Please upload <b>at least one video</b></h4>")})})}).insert({bottom:e.me.getUploaderDiv()}),e.me._loadUploader(),pageJs._word.videos&&pageJs._word.videos.length>0&&pageJs._word.videos.each(function(t){e.me.getVideoRow($(e.me._htmlIds.uploaderDivId).down(".panel-body"),t,t.asset)}),e.me},getUploaderDiv:function(){var e={}
return e.me=this,e.newDiv=new Element("div",{"class":"uploader",id:e.me.uploaderDivId}).insert({bottom:new Element("input",{id:"fileupload",type:"file",name:"file"})}).insert({bottom:new Element("div",{id:"progress",style:"width: 100%; border: 1px solid black; height: 10px;"}).insert({bottom:new Element("div",{"class":"bar",style:"width: 0%; height: 100%; background-color: blue;"})})}),e.newDiv},selectWord:function(e){var t={}
if(t.me=this,t.word=e||!1,"NEW"===t.me._word.id)$(t.me._htmlIds.itemDiv).update(""),t.me._getVideoUploadPanel()
else{if(e.id.empty())return
e.categoryId=t.me._category.id,e.categoryName=t.me._category.name,e.languageId=t.me._language.id,e.languageName=t.me._language.name,t.me._word=e,$(t.me._htmlIds.itemDiv).update(""),t.me._getVideoUploadPanel()}return $(t.me._htmlIds.breadcrumb).show().insert({bottom:new Element("li").update("Word: "+t.me._word.name)}),t.me},_getNewWordRow:function(e){var t={}
return t.me=this,t.tbody=e.up(".table").down("tbody"),t.searchTxt=$F($(t.me._htmlIds.searchPanel).down("input.search-txt")),t.tbody.update().insert({bottom:t.me._getNewWordPanel(t.searchTxt)}).down('[save-item-panel="name"]').select(),t.me},_getNewWordPanel:function(e){var t={}
return t.me=this,t.searchTxt=e||"",t.newDiv=new Element("tr",{"class":"save-item-panel info"}).insert({bottom:new Element("input",{type:"hidden","save-item-panel":"id",value:t.me._word.id?t.me._word.id:"NEW"})}).insert({bottom:new Element("input",{type:"hidden","save-item-panel":"categoryId",value:t.me._category.id})}).insert({bottom:new Element("input",{type:"hidden","save-item-panel":"languageId",value:t.me._language.id})}).insert({bottom:new Element("td",{"class":"form-group",colspan:2}).insert({bottom:new Element("input",{required:!0,"class":"form-control",placeholder:"The Name of the Word","save-item-panel":"name",value:t.me._word.name?t.me._word.name:t.searchTxt})}).observe("keydown",function(e){return t.btn=$(this),t.me.keydown(e,function(){t.btn.up(".save-item-panel").down(".btn.btn-save-word").select(),t.btn.up(".save-item-panel").down(".btn.btn-save-word").focus()}),!1})}).insert({bottom:new Element("td",{"class":"form-group"}).insert({bottom:new Element("input",{"class":"form-control",disabled:!0,title:"Category Name","save-item-panel":"categoryName",value:t.me._category.name})})}).insert({bottom:new Element("td",{"class":"form-group"}).insert({bottom:new Element("input",{"class":"form-control",disabled:!0,title:"Language Name","save-item-panel":"languageName",value:t.me._language.name})})}).insert({bottom:new Element("td",{"class":"hidden"}).insert({bottom:t.isTitle===!0?word.active:new Element("input",{type:"checkbox",disabled:!0,checked:t.me._word.active?t.me._word.active:!0})})}).insert({bottom:new Element("td",{"class":"text-right"}).insert({bottom:new Element("span",{"class":"btn-group"}).insert({bottom:new Element("span",{"class":"btn btn-success btn-save-word btn-responsive btn-sm",title:"Save"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-ok"})}).observe("click",function(){t.btn=this,t.me._word=t.me._collectFormData($(t.btn).up(".save-item-panel"),"save-item-panel"),t.me.selectWord()})}).insert({bottom:new Element("span",{"class":"btn btn-danger btn-responsive btn-sm",title:"Delete"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-remove"})}).observe("click",function(){t.me._word.id?$(this).up(".save-item-panel").replace(t.me._getNewWordPanel().addClassName("item_row").writeAttribute("item_id",t.me._word.id)):$(this).up(".save-item-panel").remove()})})})}),t.me._word.id&&t.newDiv.addClassName("item_row").writeAttribute("item_id",t.me._word.id),t.newDiv},_getWordRow:function(e,t){var n={}
return n.me=this,n.isTitle=t||!1,n.tag=n.isTitle===!0?"th":"td",n.newDiv=new Element("tr",{"class":(n.isTitle===!0?"item_top_row":"item_row")+(0==e.active?" danger":""),item_id:n.isTitle===!0?"":e.id}).store("data",e).insert({bottom:new Element(n.tag,{"class":n.isTitle?"hidden":""}).insert({bottom:n.isTitle===!0?"&nbsp;":new Element("span",{"class":"btn btn-primary btn-xs"}).update("select").observe("click",function(){n.me.selectWord(e)})})}).insert({bottom:new Element(n.tag).update("").setStyle(n.isTitle?"":"display:none;")}).insert({bottom:new Element(n.tag,{colspan:1}).update(e.name)}).insert({bottom:new Element(n.tag).update(n.isTitle===!0?"Category":n.me._category.name)}).insert({bottom:new Element(n.tag).update(n.isTitle===!0?"Language":n.me._language.name)}).insert({bottom:new Element(n.tag,{"class":"hidden"}).insert({bottom:n.isTitle===!0?e.active:new Element("input",{type:"checkbox",disabled:!0,checked:e.active})})}).insert({bottom:n.isTitle!==!0?"":new Element(n.tag,{id:n.me._htmlIds.newWordBtn,"class":"text-right"}).setStyle("display: none;").insert({bottom:new Element("a",{"class":"btn btn-success btn-xs btn-responsive"}).insert({bottom:new Element("span",{"class":"fa fa-plus"})})}).observe("click",function(){n.me._getNewWordRow($(this))})}),n.newDiv},_searchWord:function(e){var t={}
return t.me=this,t.searchTxt=$F(e).strip(),t.searchPanel=$(e).up("#"+t.me._htmlIds.searchPanel),t.me.postAjax(t.me.getCallbackId("searchWord"),{searchTxt:t.searchTxt},{onLoading:function(){$(t.searchPanel).down(".list-div")&&$(t.searchPanel).down(".list-div").remove(),$(t.searchPanel).insert({bottom:new Element("div",{"class":"panel-body"}).update(t.me.getLoadingImg())})},onSuccess:function(e,n){$(t.searchPanel).down(".panel-body")&&$(t.searchPanel).down(".panel-body").remove()
try{if(t.result=t.me.getResp(n,!1,!0),!t.result||!t.result.items)return
$(t.searchPanel).insert({bottom:new Element("small",{"class":"table-responsive list-div"}).insert({bottom:new Element("table",{"class":"table table-hover table-condensed"}).insert({bottom:new Element("thead").insert({bottom:t.me._getWordRow({name:"Name",active:"Active?"},!0)})}).insert({bottom:t.listDiv=new Element("tbody")})})}),t.result.items.length>0?t.result.items.each(function(e){t.listDiv.insert({bottom:t.me._getWordRow(e)})}):$(t.me._htmlIds.newWordBtn).show()}catch(i){$(t.searchPanel).insert({bottom:new Element("div",{"class":"panel-body"}).update(t.me.getAlertBox("ERROR",i).addClassName("alert-danger"))})}}}),t.me},_getWordListPanel:function(){var e={}
return e.me=this,e.newDiv=new Element("div",{id:e.me._htmlIds.searchPanel,"class":"panel panel-default search-panel"}).insert({bottom:new Element("div",{"class":"panel-heading form-inline"}).insert({bottom:new Element("strong").update("Select the Word to Edit: ")}).insert({bottom:new Element("span",{"class":"input-group col-sm-6"}).insert({bottom:new Element("input",{"class":"form-control search-txt init-focus",placeholder:"the Name of Word ..."}).observe("keydown",function(t){return e.txtBox=this,e.me.keydown(t,function(){e.txtBox.up("#"+pageJs._htmlIds.searchPanel).down(".search-btn").click()}),!1})}).insert({bottom:new Element("span",{"class":"input-group-btn search-btn"}).insert({bottom:new Element("span",{"class":" btn btn-primary"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-search"})})}).observe("click",function(){e.btn=this,e.txtBox=$(e.me._htmlIds.searchPanel).down(".search-txt"),$F(e.txtBox).blank()?$(e.me._htmlIds.searchPanel).down(".table tbody")&&($(e.me._htmlIds.searchPanel).down(".table tbody").innerHTML=null):e.me._searchWord(e.txtBox)})})})}),e.newDiv},selectCategory:function(e){var t={}
return t.me=this,t.me._category=e,t.me._language=e.language,$(t.me._htmlIds.breadcrumb).show().insert({bottom:new Element("li").update("Category: "+e.name)}),$(t.me._htmlIds.itemDiv).update(t.wordPanel=t.me._getWordListPanel()),t.wordPanel.down("input.search-txt").focus(),t.me},_getCategoryRow:function(e,t){var n={}
return n.me=this,n.isTitle=t||!1,n.tag=n.isTitle===!0?"th":"td",n.newDiv=new Element("tr",{"class":(n.isTitle===!0?"item_top_row":"item_row")+(0==e.active?" danger":""),item_id:n.isTitle===!0?"":e.id}).store("data",e).insert({bottom:new Element(n.tag).insert({bottom:n.isTitle===!0?"&nbsp;":new Element("span",{"class":"btn btn-primary btn-xs"}).update("select").observe("click",function(){n.me.selectCategory(e)})})}).insert({bottom:new Element(n.tag).update(e.name)}).insert({bottom:new Element(n.tag).update(e.language.name)}).insert({bottom:new Element(n.tag).insert({bottom:n.isTitle===!0?e.active:new Element("input",{type:"checkbox",disabled:!0,checked:e.active})})}),n.newDiv},_searchCategory:function(e){var t={}
return t.me=this,t.searchTxt=$F(e).strip(),t.searchPanel=$(e).up("#"+t.me._htmlIds.searchPanel),t.me.postAjax(t.me.getCallbackId("searchCategory"),{searchTxt:t.searchTxt},{onLoading:function(){$(t.searchPanel).down(".list-div")&&$(t.searchPanel).down(".list-div").remove(),$(t.searchPanel).insert({bottom:new Element("div",{"class":"panel-body"}).update(t.me.getLoadingImg())})},onSuccess:function(e,n){$(t.searchPanel).down(".panel-body")&&$(t.searchPanel).down(".panel-body").remove()
try{if(t.result=t.me.getResp(n,!1,!0),!t.result||!t.result.items)return
$(t.searchPanel).insert({bottom:new Element("small",{"class":"table-responsive list-div"}).insert({bottom:new Element("table",{"class":"table table-hover table-condensed"}).insert({bottom:new Element("thead").insert({bottom:t.me._getCategoryRow({name:"Name",active:"Active?",language:{name:"Language"}},!0)})}).insert({bottom:t.listDiv=new Element("tbody")})})}),t.result.items.each(function(e){t.listDiv.insert({bottom:t.me._getCategoryRow(e)})})}catch(i){$(t.searchPanel).insert({bottom:new Element("div",{"class":"panel-body"}).update(t.me.getAlertBox("ERROR",i).addClassName("alert-danger"))})}}}),t.me},_getCategoryListPanel:function(){var e={}
return e.me=this,e.newDiv=new Element("div",{id:e.me._htmlIds.searchPanel,"class":"panel panel-default search-panel"}).insert({bottom:new Element("div",{"class":"panel-heading form-inline"}).insert({bottom:new Element("span").update("Search for ")}).insert({bottom:new Element("strong").update("Sign Language: ")}).insert({bottom:new Element("span",{"class":"input-group col-sm-6"}).insert({bottom:new Element("input",{title:"Name of Sign Language","class":"form-control search-txt init-focus",placeholder:"the Name of Sign Language ..."}).observe("keydown",function(t){return e.txtBox=this,e.me.keydown(t,function(){e.txtBox.up("#"+pageJs._htmlIds.searchPanel).down(".search-btn").click()}),!1})}).insert({bottom:new Element("span",{"class":"input-group-btn search-btn"}).insert({bottom:new Element("span",{"class":" btn btn-primary"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-search"})})}).observe("click",function(){e.btn=this,e.txtBox=$(e.me._htmlIds.searchPanel).down(".search-txt"),$F(e.txtBox).blank()?$(e.me._htmlIds.searchPanel).down(".table tbody")&&($(e.me._htmlIds.searchPanel).down(".table tbody").innerHTML=null):e.me._searchCategory(e.txtBox)})})})}),e.newDiv},init:function(e){var t={}
return t.me=this,t.category=e||!1,t.category?(t.me.selectCategory(e),t.me._category=t.category):$(t.me._htmlIds.itemDiv).update(t.me._getCategoryListPanel()),$$(".init-focus").size()>0&&$$(".init-focus").first().focus(),t.me}})
