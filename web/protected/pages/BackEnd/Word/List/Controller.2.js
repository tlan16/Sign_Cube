var PageJs=new Class.create;PageJs.prototype=Object.extend(new BackEndPageJs,{_getTitleRowData:function(){return{name:"Word",category:{name:"Category",language:{name:"Language"}},language:{name:"Language"},active:"Active?"}},_bindSearchKey:function(){var e={};return e.me=this,$("searchPanel").getElementsBySelector("[search_field]").each(function(t){t.observe("keydown",function(t){e.me.keydown(t,function(){$(e.me.searchDivId).down("#searchBtn").click()})})}),this},_loadChosen:function(){return jQuery(".chosen").chosen({search_contains:!0,inherit_select_classes:!0,no_results_text:"No sign language type found!",width:"100%"}).trigger("chosen:updated"),this},_getEditPanel:function(e){var t={};return t.me=this,t.selectEl=new Element("select",{"class":"chosen","data-placeholder":"Sign Language...","save-item-panel":"category"}),t.me._categories&&t.me._categories.length>0&&t.me._categories.each(function(e){t.foundLanguage=!1,$(t.selectEl).getElementsBySelector("optgroup").each(function(n){t.foundLanguage===!1&&n.readAttribute("langId")==e.language.id&&(t.foundLanguage=!0,t.option=n.insert({bottom:new Element("option",{categoryId:e.id,value:e.id}).update(e.name)}))}),t.foundLanguage===!1&&t.selectEl.insert({bottom:new Element("optgroup",{langId:e.language.id,label:e.language.name}).update(e.language.name).store("data",e.language)})}),t.selectEl.down('[categoryid="'+e.category.id+'"]').writeAttribute("selected",!0),t.newDiv=new Element("tr",{"class":"save-item-panel info"}).store("data",e).insert({bottom:new Element("input",{type:"text","save-item-panel":"id",value:e.id?e.id:""}).setStyle("display:none;")}).insert({bottom:new Element("td",{"class":"form-group"}).insert({bottom:new Element("input",{required:!0,"class":"form-control",placeholder:"The Word","save-item-panel":"name",value:e.name?e.name:""})})}).insert({bottom:new Element("td",{"class":"form-group"}).insert({bottom:t.selectEl})}).insert({bottom:new Element("td",{"class":"form-group"}).insert({bottom:new Element("input",{"class":"form-control",placeholder:"The parent Language",disabled:!0,title:"To change this, delete and create new one.","save-item-panel":"languageName",value:e.category.language.name?e.category.language.name:""})}).hide()}).insert({bottom:new Element("td",{"class":"form-group"}).setStyle("display:none;").insert({bottom:new Element("input",{"class":"form-control","save-item-panel":"categoryId",value:e.category.id?e.category.id:""})})}).insert({bottom:new Element("td",{"class":"form-group"}).setStyle("display:none;").insert({bottom:new Element("input",{"class":"form-control","save-item-panel":"languageId",value:e.category.language.id?e.category.language.id:""})})}).insert({bottom:new Element("td",{"class":"form-group"}).insert({bottom:new Element("input",{type:"checkbox","class":"form-control","save-item-panel":"active",checked:e.active})})}).insert({bottom:new Element("td",{"class":"text-right"}).insert({bottom:new Element("span",{"class":"btn-group btn-group-sm"}).insert({bottom:new Element("span",{"class":"btn btn-success",title:"Save"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-ok"})}).observe("click",function(){t.btn=this,t.me._saveItem(t.btn,$(t.btn).up(".save-item-panel"),"save-item-panel")})}).insert({bottom:new Element("span",{"class":"btn btn-danger",title:"Delete"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-remove"})}).observe("click",function(){e.id?$(this).up(".save-item-panel").replace(t.me._getResultRow(e).addClassName("item_row").writeAttribute("item_id",e.id)):$(this).up(".save-item-panel").remove()})})})}),t.newDiv},_getResultRow:function(e,t){var n={};return n.me=this,n.tag=n.isTitle===!0?"th":"td",n.isTitle=t||!1,n.row=new Element("tr",{style:n.isTitle?"font-size:110%; font-weight:bold;":"","class":n.isTitle===!0?"":e.active?"btn-hide-row":"danger"}).store("data",e).insert({bottom:new Element(n.tag,{"class":"name col-xs-3",style:n.isTitle?"font-weight:bold;":""}).update(e.name)}).insert({bottom:new Element(n.tag,{"class":"categoryName col-xs-3",style:n.isTitle?"font-weight:bold;":""}).update(e.category.name+"("+e.category.language.name+")")}).insert({bottom:new Element(n.tag,{"class":"languageName col-xs-3",style:n.isTitle?"font-weight:bold;":""}).update(e.category.language.name).hide()}).insert({bottom:new Element(n.tag,{"class":"active col-xs-1"}).insert({bottom:n.isTitle===!0?e.active:new Element("input",{type:"checkbox",disabled:!0,checked:e.active})})}).insert({bottom:new Element(n.tag,{"class":"text-right btns col-xs-2"}).update(n.isTitle===!0?new Element("span",{"class":"btn btn-primary btn-xs",title:"New"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-plus"})}).insert({bottom:" NEW"}).observe("click",function(){n.me.showModalBox("Notice","<h4>Redirecting to <b>word creation</b> Page ...</h4>"),window.open("/backend/word/new.html","_self")}):new Element("span",{"class":e.active?"btn-group btn-group-xs":""}).insert({bottom:new Element("span",{"class":"btn btn-xs btn-default",title:"Edit"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-pencil"})}).observe("click",function(){$(this).up(".item_row").replace(n.editEl=n.me._getEditPanel(e)),n.me._loadChosen(),n.editEl.down(".form-control[save-item-panel]").focus(),n.editEl.down(".form-control[save-item-panel]").select(),n.editEl.getElementsBySelector(".form-control[save-item-panel]").each(function(e){e.observe("keydown",function(e){return n.me.keydown(e,function(){n.editEl.down(".btn-success span").click()}),!1})})})}).insert({bottom:new Element("span",{"class":e.active?"btn btn-danger":"",title:"Delete"}).setStyle(e.active?"":"display:none;").insert({bottom:new Element("span",{"class":"glyphicon glyphicon-trash"})}).observe("click",function(){return confirm("Are you sure you want to delete this item?")?void n.me._deactivateItem($(this)):!1})}))}),n.row}});